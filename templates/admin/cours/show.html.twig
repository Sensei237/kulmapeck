{% extends 'admin/base.html.twig' %}

{% block pageTitle %}Course details{% endblock %}

{% block actionBtn %}
	<a href="{{ path('app_front_course_details', {slug: course.slug}) }}" target="_blank" class="btn btn-sm btn-primary mb-0">Go to course</a>
{% endblock %}

{% block script %}
    

{% endblock %}

{% block mainContent %}

    <div class="row g-4">

		<!-- Course information START -->
		<div class="col-xxl-6">
			<div class="card bg-transparent border rounded-3 h-100">

				<!-- Catd header -->
				<div class="card-header bg-light border-bottom">
					<h5 class="card-header-title">{{ course.intitule }}</h5>
				</div>

				<!-- Card body START -->
				<div class="card-body">

					<!-- Course image and info START -->
					<div class="row g-4">
						<!-- Course image -->
						<div class="col-md-6">
							<img src="{{asset('assets/images/courses/4by3/01.jpg')}}" class="rounded" alt="">
						</div>
						<!-- Course info and avatar -->
						<div class="col-md-6">
							<!-- Info -->
							<p class="mb-3">{{ course.description }}</p>

							<!-- Price -->
							<h5 class="mb-3">{{ course.isFree ? 'free' : '$' ~ course.montantAbonnement }}</h5>
							
							<!-- Avatar -->
							<div class="d-sm-flex align-items-center">
								<!-- Avatar image -->
								<div class="avatar avatar-md">
									<img class="avatar-img rounded-circle" src="{{asset('assets/images/avatar/05.jpg')}}" alt="avatar">
								</div>
								<div class="ms-sm-3 mt-2 mt-sm-0">
									<h6 class="mb-0"><a href="#">By {{ course.enseignant.utilisateur.personne.nomComplet }}</a></h6>
									<p class="mb-0 small">Founder Eduport company</p>
								</div>
							</div>
						</div>
					</div>
					<!-- Course image and info END -->

					<!-- Information START -->
					<div class="row mt-3">

						<!-- Information item -->
						<div class="col-md-6">
							<ul class="list-group list-group-borderless">
								<li class="list-group-item">
									<span>release date:</span>
									<span class="h6 mb-0">{{ course.createdAt|date('d/m/Y') }}</span>
								</li>

								<li class="list-group-item">
									<span>Total Hour:</span>
									<span class="h6 mb-0">{{ course.dureeApprentissage }}</span>
								</li>

								<li class="list-group-item">
									<span>Total Enrolled:</span>
									<span class="h6 mb-0">{{ course.eleves|length }}</span>
								</li>

								<li class="list-group-item">
									<span>Certificate:</span>
									<span class="h6 mb-0">Yes</span>
								</li>
							</ul>
						</div>

						<!-- Information item -->
						<div class="col-md-6">
							<ul class="list-group list-group-borderless">
								<li class="list-group-item">
									<span>Skills:</span>
									<span class="h6 mb-0">{{ course.niveauDifficulte }}</span>
								</li>

								<li class="list-group-item">
									<span>Total chapter:</span>
									<span class="h6 mb-0">{{ course.chapitres|length }}</span>
								</li>

								<li class="list-group-item">
									<span>Language:</span>
									<span class="h6 mb-0">{{ course.language }}</span>
								</li>

								<li class="list-group-item">
									<span>Review:</span>
									<span class="h6 mb-0">4.5<i class="fas fa-star text-warning ms-1"></i></span>
								</li>
								
							</ul>
						</div>
					</div>
					<!-- Information END -->
				</div>
				<!-- Card body END -->
			</div>
		</div>
		<!-- Course information END -->

			<!-- Chart START -->
			<div class="col-xxl-6">
				<div class="row g-4">

				<!-- Active student START -->
				<div class="col-md-6 col-xxl-12">
					<div class="card bg-transparent border overflow-hidden">
						<!-- Card header -->
						<div class="card-header bg-light border-bottom">
							<h5 class="card-header-title mb-0">Total course earning</h5>
						</div>
						<!-- Card body -->
						<div class="card-body p-0">
							<div class="d-sm-flex justify-content-between p-4">
								<h4 class="text-blue mb-0">$12,586</h4>
								<p class="mb-0"><span class="text-success me-1">0.20%<i class="bi bi-arrow-up"></i></span>vs last Week</p>
							</div>
							<!-- Apex chart -->
							<div id="activeChartstudent"></div>
						</div>
					</div>
				</div>
				<!-- Active student END -->

					<!-- Enrolled START -->
					<div class="col-md-6 col-xxl-12">
						<div class="card bg-transparent border overflow-hidden">
							<!-- Card header -->
							<div class="card-header bg-light border-bottom">
								<h5 class="card-header-title mb-0">New Enrollment This Month</h5>
							</div>
							<!-- Card body -->
							<div class="card-body p-0">
								<div class="d-sm-flex justify-content-between p-4">
									<h4 class="text-blue mb-0">186</h4>
									<p class="mb-0"><span class="text-success me-1">0.35%<i class="bi bi-arrow-up"></i></span>vs last Week</p>
								</div>
								<!-- Apex chart -->
								<div id="activeChartstudent2"></div>
							</div>
						</div>
					</div>
					<!-- Enrolled END -->

				</div>
			</div>
			<!-- Chart END -->

			<!-- Student review START -->
			<div class="col-md-6">
				<div class="card bg-transparent border">

					<!-- Card header START -->
					<div class="card-header bg-light border-bottom">
						<h5 class="mb-0">Enrolled students</h5>
					</div>
					<!-- Card header END -->
					
					<!-- Card body START -->
					<div class="card-body pb-0">
						<!-- Table START -->
						<div class="table-responsive border-0">
							<table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
								<!-- Table head -->
								<thead>
									<tr>
										<th scope="col" class="border-0 rounded-start">Student Name</th>
										<th scope="col" class="border-0">Date</th>
										<th scope="col" class="border-0">Progress</th>
									</tr>
								</thead>
		
								<!-- Table body START -->
								<tbody>
									{% for eleve in eleves %}
										<tr>
										<!-- Table data -->
										<td>
											<div class="d-flex align-items-center position-relative">
												<!-- Image -->
												<div class="avatar avatar-md">
													<img src="{{ asset('uploads/images/eleves/' ~ eleve.utilisateur.personne.imageFile) }}" class="rounded-circle" alt="">
												</div>
												<div class="mb-0 ms-3">
													<!-- Title -->
													<h6 class="mb-0"><a href="#" class="stretched-link">{{ eleve.utilisateur.personne.nomComplet }}</a></h6>
													<span class="text-body small"><i class="fas fa-fw fa-map-marker-alt me-1 mt-1"></i>{{ eleve.utilisateur.personne.adresse }}</span>
												</div>
											</div>
										</td>

										<!-- Table data -->
										<td>15 July 2021</td>

										<!-- Table data -->
										<td class="text-center text-sm-start">
											<div class="overflow-hidden">
												<h6 class="mb-0">60%</h6>
												<div class="progress progress-sm bg-primary bg-opacity-10">
													<div class="progress-bar bg-primary aos aos-init aos-animate" role="progressbar" data-aos="slide-right" data-aos-delay="200" data-aos-duration="1000" data-aos-easing="ease-in-out" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
													</div>
												</div>
											</div>
										</td>
									</tr>
									{% else %}
										<tr><td>No data found</td></tr>
									{% endfor %}
								</tbody>
								<!-- Table body END -->
							</table>
						</div>
						<!-- Table END -->
					</div>
					<!-- Card body END -->
		
					<!-- Card footer START -->
					<div class="card-footer bg-transparent">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							{{ knp_pagination_render(eleves) }}
						</div>
						<!-- Pagination END -->
					</div>
					<!-- Card footer END -->
				</div>
			</div>
			<!-- Student review END -->

			<!-- Student review START -->
			<div class="col-md-6">
				<div class="card bg-transparent border">

					<!-- Card header START -->
					<div class="card-header bg-light border-bottom">
						<h5 class="mb-0">Students all Reviews</h5>
					</div>
					<!-- Card header END -->
					
					<!-- Card body START -->
					<div class="card-body pb-0">
						<!-- Table START -->
						<div class="table-responsive border-0">
							<table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
								<!-- Table head -->
								<thead>
									<tr>
										<th scope="col" class="border-0 rounded-start">Student Name</th>
										<th scope="col" class="border-0">Date</th>
										<th scope="col" class="border-0">Rating</th>
										<th scope="col" class="border-0 rounded-end">Action</th>
									</tr>
								</thead>
		
								<!-- Table body START -->
								<tbody>
									{% for review in reviews %}
										<!-- Table row -->
										<tr>
											<!-- Table data -->
											<td>
												<div class="d-flex align-items-center position-relative">
													<!-- Image -->
													<div class="avatar avatar-xs mb-2 mb-md-0">
														<img src="{{ asset('uploads/images/eleves/' ~ review.eleve.utilisateur.personne.imageFile) }}" class="rounded-circle" alt="">
													</div>
													<div class="mb-0 ms-2">
														<!-- Title -->
														<h6 class="mb-0"><a href="#" class="stretched-link">{{ review.eleve.utilisateur.personne.nomComplet }}</a></h6>
													</div>
												</div>
											</td>
			
											<!-- Table data -->
											<td class="text-center text-sm-start">
												<h6 class="mb-0">{{ review.createdAt|date('d/m/Y') }}</h6>
											</td>
			
											<!-- Table data -->
											<td>
												<ul class="list-inline mb-0">
													{% for i in 1..course.review.rating %}
														<li class="list-inline-item me-0 small"><i class="fas fa-star text-warning"></i></li>
													{% endfor %}
												</ul>
											</td>
			
											<!-- Table data -->
											<td>
												<a href="#" class="btn btn-sm btn-info-soft mb-0" data-bs-toggle="modal" data-bs-target="#viewReview{{ review.id }}">View</a>
												<button class="btn btn-sm btn-danger-soft me-1 mb-1 mb-md-0">Delete</button>
											</td>
										</tr>
									{% else %}
										<tr><td>No data found</td></tr>
									{% endfor %}
								</tbody>
								<!-- Table body END -->
							</table>
						</div>
						<!-- Table END -->
					</div>
					<!-- Card body END -->
		
					<!-- Card footer START -->
					<div class="card-footer bg-transparent">
						<!-- Pagination START -->
						<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
							{{ knp_pagination_render(reviews) }}
						</div>
						<!-- Pagination END -->
					</div>
					<!-- Card footer END -->
				</div>
			</div>
			<!-- Student review END -->

		</div> <!-- Row END -->


	{% for review in course.reviews %}
		<!-- Popup modal for reviwe START -->
		<div class="modal fade" id="viewReview{{ review.id }}" tabindex="-1" aria-labelledby="viewReviewLabel{{ review.id }}" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<!-- Modal header -->
					<div class="modal-header bg-dark">
						<h5 class="modal-title text-white" id="viewReviewLabel{{ review.id }}">Review</h5>
						<button type="button" class="btn btn-sm btn-light mb-0" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button>
					</div>
					<!-- Modal body -->
					<div class="modal-body">
						<div class="d-md-flex">
							<!-- Avatar -->
							<div class="avatar avatar-md me-4 flex-shrink-0">
								<img class="avatar-img rounded-circle" src="{{ asset('uploads/images/eleves/' ~ review.eleve.utilisateur.personne.imageFile) }}" alt="avatar">
							</div>
							<!-- Text -->
							<div>
								<div class="d-sm-flex mt-1 mt-md-0 align-items-center">
									<h5 class="me-3 mb-0">{{ review.eleve.utlisateur.personne.imageFile }}</h5>
									<!-- Review star -->
									<ul class="list-inline mb-0">
										{% for i in 1..course.review.rating %}
											<li class="list-inline-item me-0 small"><i class="fas fa-star text-warning"></i></li>
										{% endfor %}
									</ul>
								</div>
								<!-- Info -->
								<p class="small mb-2">{{ review.createdAt|date('d/m/Y') }}</p>
								<p class="mb-2">{{ review.message }}</p>
								
							</div>	
						</div>
					</div>
					<!-- Modal footer -->
					<div class="modal-footer">
						<button type="button" class="btn btn-danger-soft my-0" data-bs-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Popup modal for reviwe END --> 
	{% endfor %}

{% endblock %}